<app-banner></app-banner>

<section class="reserva-container">
  <h2 class="reserva-title">Hacé tu reserva</h2>

  <form class="reserva-form" [formGroup]="form" (ngSubmit)="onSubmit()">
    <!-- Restaurante -->
    <div class="form-group">
      <label for="restaurante">Restaurante</label>
      <input id="restaurante" type="text" [value]="reserva.razonSocial" disabled />
    </div>

    <!-- Sucursal -->
    <div class="form-group">
      <label for="sucursal">Sucursal</label>

      <input id="sucursal" type="text" [value]="reserva.nomSucursal" disabled />
    </div>

    <!-- Fecha -->
    <div class="form-group">
      <label for="fecha">Fecha</label>
      <input id="fecha" type="date" formControlName="fecha" />
    </div>

    <!-- Cantidad de personas -->
    <div class="form-group">
      <label for="personas">Cantidad de personas</label>
      <select id="personas" formControlName="personas">
        <option value="">Seleccioná cantidad</option>
        <option *ngFor="let c of cantidadesComensalesOpciones" [ngValue]="c">
          {{ c }}
        </option>
      </select>
    </div>

    <!-- Turno / Hora -->
    <div class="form-group">
      <label for="turno">Turno</label>
      <select id="turno" formControlName="turno">
        <option value="">Seleccioná un turno</option>

        <option
          *ngFor="let t of turnosDisponibles"
          [value]="t.horaReserva"
          [disabled]="
            +(form.get('personas')?.value ?? 0) > t.cupoDisponible || t.turnoCerrado === 1
          "
        >
          {{ t.horaReserva.slice(0, 5) }} - {{ t.horaHasta.slice(0, 5) }} (Disponibles:
          {{ t.cupoDisponible }})
        </option>
      </select>
    </div>

    <button type="submit" [disabled]="form.invalid">Reservar</button>
    <button type="button" [disabled]="form.invalid">Cancelar</button>
  </form>
</section>
